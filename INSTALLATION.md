# Core-System Installation Guide

## ğŸ“‹ **ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ú©Ù¾ÛŒ Ø´Ø¯Ù‡**

ØªÙ…Ø§Ù… ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Core-System Ø¨Ù‡ Ù…Ø³ÛŒØ± Ø²ÛŒØ± Ú©Ù¾ÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯:
```
\\wsl.localhost\Ubuntu\home\ahad\proj\core\
```

## ğŸ—‚ï¸ **Ø³Ø§Ø®ØªØ§Ø± Ú©Ø§Ù…Ù„ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§**

```
core/
â”œâ”€â”€ ğŸ“„ docker-compose.core.yml     # ØªÙ†Ø¸ÛŒÙ…Ø§Øª Docker Compose
â”œâ”€â”€ ğŸ“„ .env.example               # Ù†Ù…ÙˆÙ†Ù‡ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·
â”œâ”€â”€ ğŸ“„ .gitignore                 # ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù†Ø§Ø¯ÛŒØ¯Ù‡ Ú¯Ø±ÙØªÙ‡ Ø´Ø¯Ù‡ Git
â”œâ”€â”€ ğŸ“„ README.md                  # Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ…
â”œâ”€â”€ ğŸ“„ Makefile                   # Ø¯Ø³ØªÙˆØ±Ø§Øª ØªÙˆØ³Ø¹Ù‡
â”œâ”€â”€ ğŸ“„ deploy.sh                  # Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø®ÙˆØ¯Ú©Ø§Ø±
â”œâ”€â”€ ğŸ“„ INSTALLATION.md            # Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù†ØµØ¨ (Ø§ÛŒÙ† ÙØ§ÛŒÙ„)
â”œâ”€â”€ ğŸ“ config/
â”‚   â”œâ”€â”€ ğŸ“„ policy.yaml           # Ø³ÛŒØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…
â”‚   â””â”€â”€ ğŸ“„ schema.yaml           # ØªØ¹Ø±ÛŒÙ Ø³Ø§Ø®ØªØ§Ø± Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
â”œâ”€â”€ ğŸ“ scripts/
â”‚   â””â”€â”€ ğŸ“„ validate_deployment.py # Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø§Ø³ØªÙ‚Ø±Ø§Ø±
â””â”€â”€ ğŸ“ api/
    â”œâ”€â”€ ğŸ“„ Dockerfile            # ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ú©Ø§Ù†ØªÛŒÙ†Ø±
    â”œâ”€â”€ ğŸ“„ requirements.txt      # ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ÛŒ Python
    â”œâ”€â”€ ğŸ“„ prestart.sh           # Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ
    â”œâ”€â”€ ğŸ“„ alembic.ini           # ØªÙ†Ø¸ÛŒÙ…Ø§Øª Migration
    â”œâ”€â”€ ğŸ“„ healthcheck.py        # Ø¨Ø±Ø±Ø³ÛŒ Ø³Ù„Ø§Ù…Øª Ø³ÛŒØ³ØªÙ…
    â”œâ”€â”€ ğŸ“„ pytest.ini            # ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªØ³Øª
    â”œâ”€â”€ ğŸ“ app/
    â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
    â”‚   â”œâ”€â”€ ğŸ“„ main.py           # Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§ØµÙ„ÛŒ FastAPI
    â”‚   â”œâ”€â”€ ğŸ“„ deps.py           # ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ Ùˆ MinIO
    â”‚   â”œâ”€â”€ ğŸ“ core/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
    â”‚   â”‚   â””â”€â”€ ğŸ“„ settings.py   # ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…
    â”‚   â”œâ”€â”€ ğŸ“ db/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ base.py       # Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ session.py    # Ø¬Ù„Ø³Ø§Øª DB
    â”‚   â”‚   â””â”€â”€ ğŸ“ migrations/
    â”‚   â”‚       â”œâ”€â”€ ğŸ“„ env.py
    â”‚   â”‚       â”œâ”€â”€ ğŸ“„ script.py.mako
    â”‚   â”‚       â””â”€â”€ ğŸ“ versions/
    â”‚   â”‚           â””â”€â”€ ğŸ“„ 0001_initial_migration.py
    â”‚   â”œâ”€â”€ ğŸ“ models/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ official.py   # Ù…Ø¯Ù„ Ø§Ø³Ù†Ø§Ø¯ Ù‚Ø§Ù†ÙˆÙ†ÛŒ
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ qa.py         # Ù…Ø¯Ù„ Ù¾Ø±Ø³Ø´ Ùˆ Ù¾Ø§Ø³Ø®
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ user.py       # Ù…Ø¯Ù„ Ú©Ø§Ø±Ø¨Ø±
    â”‚   â”‚   â””â”€â”€ ğŸ“„ sync.py       # Ù…Ø¯Ù„ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ
    â”‚   â”œâ”€â”€ ğŸ“ routers/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ health.py     # API Ø³Ù„Ø§Ù…Øª Ø³ÛŒØ³ØªÙ…
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ stats.py      # API Ø¢Ù…Ø§Ø±
    â”‚   â”‚   â””â”€â”€ ğŸ“„ sync.py       # API Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ
    â”‚   â””â”€â”€ ğŸ“ utils/
    â”‚       â”œâ”€â”€ ğŸ“„ __init__.py
    â”‚       â””â”€â”€ ğŸ“„ minio_helper.py # Ú©Ù…Ú©ÛŒ MinIO
    â””â”€â”€ ğŸ“ tests/
        â”œâ”€â”€ ğŸ“„ __init__.py
        â”œâ”€â”€ ğŸ“„ test_health.py    # ØªØ³Øª Ø³Ù„Ø§Ù…Øª Ø³ÛŒØ³ØªÙ…
        â”œâ”€â”€ ğŸ“„ test_stats.py     # ØªØ³Øª Ø¢Ù…Ø§Ø±
        â”œâ”€â”€ ğŸ“„ test_sync.py      # ØªØ³Øª Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ
        â””â”€â”€ ğŸ“„ test_integration.py # ØªØ³Øª ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ
```

## ğŸš€ **Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ**

### 1. **Ø¨Ø±Ø±Ø³ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§**
```bash
cd /home/ahad/proj/core
ls -la
```

### 2. **Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¨Ú©Ù‡ Docker**
```bash
docker network create advisor_net
```

### 3. **ØªÙ†Ø¸ÛŒÙ… Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·**
```bash
cp .env.example .env
nano .env  # ÙˆÛŒØ±Ø§ÛŒØ´ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
```

### 4. **Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø®ÙˆØ¯Ú©Ø§Ø±**
```bash
chmod +x deploy.sh
./deploy.sh
```

### 5. **Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø¯Ø³ØªÛŒ**
```bash
# Ø³Ø§Ø®Øª Ùˆ Ø§Ø¬Ø±Ø§ÛŒ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
docker compose -f docker-compose.core.yml up -d --build

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
docker compose -f docker-compose.core.yml ps
```

## ğŸ”— **Ø¢Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ**

Ù¾Ø³ Ø§Ø² Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…ÙˆÙÙ‚:

- **ğŸŒ API Ø§ØµÙ„ÛŒ**: http://localhost:8000
- **ğŸ“š Ù…Ø³ØªÙ†Ø¯Ø§Øª API**: http://localhost:8000/docs
- **ğŸ’š Ø¨Ø±Ø±Ø³ÛŒ Ø³Ù„Ø§Ù…Øª**: http://localhost:8000/health
- **ğŸ“Š Ø¢Ù…Ø§Ø± Ø³ÛŒØ³ØªÙ…**: http://localhost:8000/stats
- **ğŸ—„ï¸ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡**: http://localhost:8082
- **ğŸ“¦ Ú©Ù†Ø³ÙˆÙ„ MinIO**: http://localhost:9001

## âš™ï¸ **Ø¯Ø³ØªÙˆØ±Ø§Øª Ù…ÙÛŒØ¯**

```bash
# Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§
docker compose -f docker-compose.core.yml logs -f

# ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
docker compose -f docker-compose.core.yml down

# Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§
docker exec -it core_api pytest

# Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡
docker exec -it core_db psql -U postgres -d coredb

# Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ú©Ø§Ù†ØªÛŒÙ†Ø± API
docker exec -it core_api /bin/bash
```

## ğŸ”§ **Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ**

### Ù…Ø´Ú©Ù„Ø§Øª Ø±Ø§ÛŒØ¬:

1. **Docker Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ù†ÛŒØ³Øª**
   ```bash
   sudo systemctl start docker
   ```

2. **Ù¾ÙˆØ±Øªâ€ŒÙ‡Ø§ Ø§Ø´ØºØ§Ù„ Ù‡Ø³ØªÙ†Ø¯**
   ```bash
   sudo netstat -tulpn | grep :8000
   sudo kill -9 <PID>
   ```

3. **Ù…Ø´Ú©Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§**
   ```bash
   sudo chown -R $USER:$USER /home/ahad/proj/core
   chmod +x deploy.sh
   ```

## âœ… **ØªØ£ÛŒÛŒØ¯ Ù†ØµØ¨**

Ø¨Ø±Ø§ÛŒ ØªØ£ÛŒÛŒØ¯ Ù†ØµØ¨ Ù…ÙˆÙÙ‚:

```bash
# Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
python3 scripts/validate_deployment.py

# ÛŒØ§ Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÛŒ
curl http://localhost:8000/health
```

## ğŸ“ **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ**

Ø¯Ø± ØµÙˆØ±Øª Ø¨Ø±ÙˆØ² Ù…Ø´Ú©Ù„:
1. Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Docker
2. Ù…Ø·Ø§Ù„Ø¹Ù‡ ÙØ§ÛŒÙ„ README.md
3. Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª validate_deployment.py
